/* Modern dark UI for Climatisation monitoring */
:root {
  --bg: #0b1220;           /* dark navy */
  --bg-elev: #0f172a;      /* slate-900 */
  --panel: #111827;        /* gray-900 */
  --muted: #94a3b8;        /* slate-400 */
  --text: #e2e8f0;         /* slate-200 */
  --primary: #38bdf8;      /* sky-400 */
  --primary-600: #0284c7;  /* sky-600 */
  --accent: #34d399;       /* emerald-400 */
  --danger: #f43f5e;       /* rose-500 */
  --card: rgba(15, 23, 42, 0.7); /* glass */
  --border: rgba(148, 163, 184, 0.12);
  --ring: rgba(56, 189, 248, 0.35);
  --shadow: 0 10px 30px rgba(0,0,0,.35);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body.app {
  margin: 0;
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
  background: radial-gradient(1200px 600px at 20% -10%, rgba(56,189,248,.08), transparent 60%),
              radial-gradient(900px 500px at 100% 20%, rgba(52,211,153,.08), transparent 60%),
              linear-gradient(180deg, var(--bg) 0%, #0a0f1d 100%);
  color: var(--text);
}

.container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

/* Topbar */
.topbar { position: sticky; top: 0; z-index: 20; backdrop-filter: blur(10px); background: rgba(2,6,23,.5); border-bottom: 1px solid var(--border); }
.topbar__inner { display: grid; grid-template-columns: 1fr auto auto; gap: 16px; align-items: center; padding: 14px 0; }
.brand { display: flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: .3px; }
.brand__logo { width: 32px; height: 32px; border-radius: 10px; background: linear-gradient(135deg, var(--primary), var(--accent)); display: grid; place-items: center; color: #0b1220; box-shadow: var(--shadow); }
.brand__title { font-size: 18px; }

.stats { display: flex; gap: 14px; }
.stat { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 10px 12px; display: flex; align-items: baseline; gap: 8px; box-shadow: var(--shadow); }
.stat span { font-weight: 700; font-size: 18px; }
.stat label { font-size: 12px; color: var(--muted); }

.actions { display: flex; gap: 10px; }

/* Buttons */
.btn { display: inline-flex; align-items: center; gap: 8px; height: 38px; padding: 0 14px; border-radius: 10px; border: 1px solid var(--border); color: var(--text); background: var(--panel); cursor: pointer; transition: .2s ease; }
.btn:hover { transform: translateY(-1px); box-shadow: 0 8px 24px rgba(2,132,199,.25); }
.btn:active { transform: translateY(0); }
.btn--primary { background: linear-gradient(135deg, var(--primary-600), var(--primary)); border-color: transparent; color: #001019; font-weight: 700; }
.btn--ghost { background: var(--card); }
.btn:disabled { opacity: .6; cursor: not-allowed; }

.icon { width: 18px; height: 18px; }

/* Inputs */
.input { height: 40px; border-radius: 10px; background: var(--card); color: var(--text); border: 1px solid var(--border); padding: 0 12px; outline: none; transition: .2s ease; }
.input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px var(--ring); }

.main { display: grid; gap: 24px; padding: 24px 0 48px; }
.section-title { margin: 6px 4px 12px; font-size: 18px; color: var(--muted); font-weight: 600; letter-spacing: .3px; }

/* Create panel */
.create-panel { display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center; }

/* Grid */
/* Agrandissement des cartes: réduire le nombre de colonnes pour donner plus d'espace à chaque carte */
.grid { display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 24px; }
@media (max-width: 1200px){ .grid { grid-template-columns: repeat(2, 1fr);} }
@media (max-width: 900px){ .grid { grid-template-columns: 1fr 1fr;} }
@media (max-width: 600px){ .grid { grid-template-columns: 1fr;} }

/* Card */
/* Cartes plus grandes et plus aérées */
.card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; box-shadow: var(--shadow); padding: 20px; }

/* Room card */
.room-card { position: relative; overflow: hidden; min-height: 260px; }
.room-card__header { display: flex; align-items: center; justify-content: space-between; gap: 10px; padding-bottom: 10px; border-bottom: 1px dashed var(--border); }
.room-card__title { display: flex; align-items: center; gap: 8px; }
.room-name { font-size: 16px; font-weight: 700; }
.badge { height: 22px; display: inline-flex; align-items: center; gap: 6px; padding: 0 8px; border-radius: 999px; border: 1px solid var(--border); background: rgba(52,211,153,.15); color: var(--accent); font-size: 12px; font-weight: 600; }
.badge--auto { background: rgba(52,211,153,.12); color: var(--accent); }

.chip { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border); font-size: 12px; font-weight: 600; }
.chip--on { background: rgba(52,211,153,.15); color: var(--accent); }
.chip--off { background: rgba(148,163,184,.15); color: var(--muted); }
.dot { width: 8px; height: 8px; border-radius: 999px; background: currentColor; opacity: .7; }

/* Plus d'espace pour les métriques sur la carte */
.room-card__metrics { display: grid; grid-template-columns: repeat(3, 1fr); gap: 14px; padding: 16px 0; }
.metric { background: rgba(2,6,23,.35); border: 1px solid var(--border); border-radius: 12px; padding: 12px; display: grid; gap: 6px; justify-items: center; }
.metric__icon { opacity: .9; }
.metric__value { font-weight: 700; font-size: 22px; }
.metric__label { font-size: 12px; color: var(--muted); }

.room-card__target { padding-top: 6px; }
.target { display: grid; grid-template-columns: auto auto 1fr; align-items: center; gap: 14px; }
.target__label { color: var(--muted); font-size: 12px; }
.target__value { font-weight: 700; }
.target__ctrl { display: inline-flex; gap: 6px; }

.room-card__footer { display: flex; align-items: center; justify-content: space-between; padding-top: 10px; margin-top: 8px; border-top: 1px dashed var(--border); }
.last-update { color: var(--muted); font-size: 12px; }

/* Les interrupteurs Auto/Clim sont désormais sous la ligne Cible, dans le flux normal */
.room-card__switches { 
  position: static; 
  margin-top: 12px;
  display: grid; 
  grid-auto-flow: column; 
  gap: 12px; 
  justify-content: start;
}
.room-card__switches--inline .switch-group { padding: 8px 10px; }
.switch-group { 
  display: grid; 
  grid-template-columns: auto auto; 
  gap: 8px; 
  align-items: center; 
  background: rgba(2,6,23,.35); 
  border: 1px solid var(--border); 
  border-radius: 999px; 
  padding: 6px 8px; 
  box-shadow: var(--shadow);
}
.switch-label { font-size: 12px; color: var(--muted); }

/* Switch */
.switch { position: relative; display: inline-block; width: 46px; height: 26px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; inset: 0; background: rgba(148,163,184,.35); transition: .25s; border-radius: 999px; border: 1px solid var(--border); }
.slider:before { content: ""; position: absolute; height: 20px; width: 20px; left: 3px; top: 50%; transform: translateY(-50%); background: #fff; border-radius: 999px; transition: .25s; box-shadow: 0 2px 8px rgba(0,0,0,.35); }
input:checked + .slider { background: rgba(52,211,153,.3); border-color: rgba(52,211,153,.5); }
input:checked + .slider:before { transform: translate(20px, -50%); }
input:disabled + .slider { opacity: .6; }

/* Detail drawer */
.detail { position: fixed; inset: 0; background: rgba(2,6,23,.65); display: grid; grid-template-rows: 1fr; align-items: center; justify-items: center; padding: clamp(8px, 2vw, 24px); opacity: 1; transition: opacity .2s ease; overflow: auto; z-index: 1000; }
.detail.hidden { opacity: 0; pointer-events: none; }
.detail__header { position: sticky; top: 0; z-index: 2; background: var(--card); display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 8px 0 12px; margin: 0 0 12px; border-bottom: 1px dashed var(--border); }
.detail__title { font-weight: 700; font-size: 18px; }
.detail__content { width: min(960px, 96vw); max-height: min(88vh, 900px); overflow: auto; background: var(--card); border: 1px solid var(--border); border-radius: 16px; box-shadow: var(--shadow); padding: 16px; }

.hero { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 12px; }
@media (max-width: 900px){ .hero { grid-template-columns: 1fr; } }
.hero__metric { background: rgba(2,6,23,.35); border: 1px solid var(--border); border-radius: 12px; padding: 16px; display: grid; gap: 8px; }
.hero__label { display: inline-flex; align-items: center; gap: 8px; color: var(--muted); font-size: 12px; }
.hero__value { font-size: 34px; font-weight: 800; }
.hero__time { color: var(--muted); font-size: 12px; }

.detail__grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
@media (max-width: 900px){ .detail__grid { grid-template-columns: 1fr; } }
.detail .card { min-height: 140px; }
.card__title { color: var(--muted); font-weight: 600; margin-bottom: 12px; }

.temp-ctrl { display: grid; grid-template-columns: 40px 1fr 40px; gap: 10px; align-items: center; }
.temp-ctrl__value { text-align: center; font-size: 26px; font-weight: 800; }

.toggles { display: grid; gap: 14px; }
.toggle-row { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 8px; }
.toggle-row__label { font-weight: 600; }
.toggle-row__hint { color: var(--muted); font-size: 12px; }

.sensor-list { display: grid; gap: 10px; }
.sensor-row { display: grid; grid-template-columns: auto 1fr auto; align-items: center; gap: 10px; background: rgba(2,6,23,.35); border: 1px solid var(--border); border-radius: 12px; padding: 10px; }
.sensor-row__icon { width: 20px; height: 20px; }
.sensor-row__name { color: var(--muted); }

/* Utilities */
.fade-in { animation: fade .25s ease; }
@keyframes fade { from{ opacity: 0; transform: translateY(6px);} to{ opacity:1; transform: translateY(0);} }
